<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2-Click Ad Trigger | JW Player</title>
  <style>
    body {
      margin: 0;
      background-color: #000;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    #video-container {
      width: 90%;
      max-width: 800px;
    }
  </style>
  <script src="https://cdn.jwplayer.com/libraries/IDzF9Zmk.js"></script>
</head>
<body>

  <div id="video-container"></div>

  <script>
    const vastAds = [
      "https://s.magsrv.com/v1/vast.php?idzone=5755632&ex_av=name",
      "https://s.magsrv.com/v1/vast.php?idzone=5757688&ex_av=name",
      "https://s.magsrv.com/v1/vast.php?idzone=5757692&ex_av=name",
      "https://s.magsrv.com/v1/vast.php?idzone=5757698&ex_av=name"
    ];

    let adIndex = 0;
    let clickCount = 0;

    const player = jwplayer("video-container").setup({
      file: "../../videoxx/video3.mp4",
      width: "100%",
      aspectratio: "16:9",
      autostart: false,
      advertising: {
        client: "vast"
      }
    });

    // Wait until the player is ready before binding clicks
    player.on("ready", function() {
      const container = player.getContainer();

      container.addEventListener("click", function() {
        clickCount++;
        console.log("Clicked", clickCount);

        if (clickCount % 2 === 0) {
          const adTag = vastAds[adIndex];
          adIndex = (adIndex + 1) % vastAds.length;

          console.log("Playing Ad:", adTag);
          player.playAd(adTag);
        }
      });

      player.on("adComplete", function() {
        console.log("Ad finished, resuming video");
        player.play(true);
      });
    });
  </script>

</body>
</html>
